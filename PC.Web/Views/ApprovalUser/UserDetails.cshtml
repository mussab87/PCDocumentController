@model IEnumerable<PC.Services.Core.Models.Levels>
@{
    ViewBag.Title = @ViewBag.authorityMatrix;
}

@*<div class="row">
    <div class="form-group col-md-4">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <a asp-action="Create" asp-controller="CategoryHeader" class="btn btn-primary btn-lg btn-block runbtn" style="width: 300px" type="button" id="btnGetPatient" name="btnGetPatient">
    <i class="glyphicon glyphicon-th">
    </i>&nbsp;&nbsp;&nbsp;Add Category Header Link
    </a>
    </div>*@

<div class="col-md-12">

    <div id="PlaceHolderHereUser"></div>

    <div class="row" id="divResults">
        <div class="resultTable" style="padding: 20px; padding-bottom: 50px">
            @if (Model.Any())
            {
                <table width="100%" class="table table-striped table-bordered media-table" id="tbl" name="tbl">

                    <thead>
                        <tr style="outline: thin solid">
                            <th colspan="6" style="text-align: -webkit-center;font-size: 20px;font-weight: bold;font-style: italic;">@ViewBag.authorityMatrix</th>
                        </tr>
                        <tr>

                            <th>No</th>
                            <th>
                                Main Category
                            </th>
                            <th>Activity</th>
                            <th>Details</th>
                            <th>Role</th>
                            <th>Action</th>

                        </tr>
                    </thead>
                    <tbody>
                        @{
                            int No = 0;
                        }
                        @foreach (var detail in Model)
                        {
                            No = No + 1;
                            <tr>
                                <td> @No </td>
                                <td>
                                    @detail.CategoryHeader.MainCategory.Name
                                </td>
                                <td>
                                    @detail.CategoryHeader.Activity.Name
                                </td>
                                <td>
                                    @detail.CategoryHeader.Details.Name
                                </td>
                                <td>
                                    @if (detail.LevelRoleId == "R")
                                    {
                                        <text>Responsible</text>
                                    }
                                    @if (detail.LevelRoleId == "A")
                                    {
                                        <text>Accountable</text>
                                    }
                                    @if (detail.LevelRoleId == "C")
                                    {
                                        <text>Consulted</text>
                                    }
                                    @if (detail.LevelRoleId == "I")
                                    {
                                        <text>Informed</text>
                                    }
                                </td>
                                <td>
                                    @if (detail.LevelRoleId == "R")
                                    {
                                        <a asp-action="CreateResponsible"
                               asp-route-catId="@detail.CategoryHeader.CategoryHeaderId"
                               asp-route-levelRoleName="@detail.LevelRoleId"
                               asp-route-userId="@detail.ApplicationUserId"
                               class="btn btn-info text-white"
                               style="cursor:pointer">
                                            Add Request
                                        </a>

                                        <a asp-action="ShowRequests"
                               asp-route-catId="@detail.CategoryHeader.CategoryHeaderId"
                               asp-route-levelRoleName="@detail.LevelRoleId"
                               asp-route-userId="@detail.ApplicationUserId"
                               class="btn btn-warning text-white"
                               style="cursor:pointer">
                                            Show Requests
                                        </a>
                                    }

                                    @if (detail.LevelRoleId == "C")
                                    {
                                        <a asp-action="ShowConsulted"
                               asp-route-catId="@detail.CategoryHeader.CategoryHeaderId"
                               asp-route-levelRoleName="@detail.LevelRoleId"
                               asp-route-userId="@detail.ApplicationUserId"
                               class="btn btn-info text-white"
                               style="cursor:pointer">
                                            Consulted Requests
                                        </a>
                                    }

                                    @if (detail.LevelRoleId == "A")
                                    {
                                        <a asp-action="ShowApprovalUser"
                               asp-route-catId="@detail.CategoryHeader.CategoryHeaderId"
                               asp-route-levelRoleName="@detail.LevelRoleId"
                               asp-route-userId="@detail.ApplicationUserId"
                               class="btn btn-info text-white"
                               style="cursor:pointer">
                                            Approvals Requests
                                        </a>
                                    }

                                    @if (detail.LevelRoleId == "I")
                                    {
                                        <a asp-action="ShowRequests"
                               asp-route-catId="@detail.CategoryHeader.CategoryHeaderId"
                               asp-route-levelRoleName="@detail.LevelRoleId"
                               asp-route-userId="@detail.ApplicationUserId"
                               asp-route-showInformed="I"
                               class="btn btn-info text-white"
                               style="cursor:pointer">
                                            Show Requests
                                        </a>
                                    }



                                </td>


                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p><h4 style="text-align:center">Sorry, you don't have permission for this Authority Matrix</h4></p>
            }

        </div>
    </div>
</div>

</div>

<!-- Vendor scripts -->
<script src="~/vendor/jquery/dist/jquery.min.js"></script>
<script src="~/vendor/jquery-ui/jquery-ui.min.js"></script>
<script src="~/vendor/slimScroll/jquery.slimscroll.min.js"></script>
<script src="~/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="~/vendor/metisMenu/dist/metisMenu.min.js"></script>

<!-- App scripts -->
<script src="~/scripts/main.js"></script>

<script src="~/vendor/jquery-validation/jquery.validate.min.js"></script>
<script src="~/vendor/sweetalert/lib/sweetalert2.min.js"></script>


